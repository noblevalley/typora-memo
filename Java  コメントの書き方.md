# Java  コメントの書き方

## 概要

プログラミング言語で書かれた箇所がどのような挙動をするかをわかりやすくメモする機能がコメントです。処理自体に影響を与えずにメモすることができます。この機能自体はJavaに限らず、どの言語にも存在します。

しかしJavaにはJavadocという他のプログラミング言語にはないドキュメント自動生成機能が備わっています。その為、コメントの種類や書き方が他のプログラミング言語より多く備わっています。

覚えることが増えて面倒かもしれませんが、この機能を意識しながら記述すれば後でソースコードを見直したときにどんな処理だったかを思い出すことが容易になります。

それに後から自分以外の人が見てわかりやすいと思われればエンジニアとしても良く見られます。

エンジニアとして成長する為に、より良いコメントの記述を身に付けましょう。

## 種類

大きく分けて3種類あります。

### 1行コメント

```java
// コメント
```

「//」を入れるとその部分から行末までがコメントになります。「//」 より前に記述していれば処理として認識します。

なお、Eclipseでは行選択後「Ctrl +/」のショートカットで付けたり消したりすることができます。



### 複数行コメント

```java
/*
* 先頭のアスタリスクは１つ
* comment
*/
```

「/」の後に「＊」を1つ入れるとその部分から「＊/」で囲んだ複数行がコメントになります。

1行コメントと違いEclipseのショートカットが存在しませんので、他のエディタを使用しない限り余り出番はないと思います。



### Javadoc

```java
/**
 * クラスやメソッドの説明
 * 先頭はアスタリスク２つです。
 */
```

「/」の後に「＊」を2つ入れるとその部分から「＊/」で囲んだ複数行がコメントになります。

なお、Eclipseでは該当メソッド行選択後「Alt + Shift + J」のショートカットで付けたりすることができます。消すのは出来ませんのでDeteleキーなどで消します。

上記2つは他のプログラミング言語にもある通常のコメントですので、各々好きなことを書けば良いのですが、3つめのJavadocはコンパイル後に実行ファイル内に埋め込まれて配布されてもツールなどで閲覧可能になる特殊なコメントです。従って変な言葉を使用したり使い方を知らずに利用すると恥ずかしい思いをしますので、このコメントは実際の処理と同様に正しく記述するように心掛けましょう。

次の項からはJavadocの機能について説明します。



## Javadocの機能

### 読み方

まずはJavadocがどのように記述されているかを確認します。

Eclipseを起動し、エディタ上で以下のコードを記述します。

```java
public class Print {
	public static void main(String[] args) {
		// 文字列を表示します
		System.out.format("Hello World!");
	}
}
```
そして「format」メソッドの箇所にマウスカーソルを移動させますと、

![2021-02-17 16_32_44-education_src_Print.java - E__project_eclipse.2019.java.AbridgeTraining_workspac](Java%20%20%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9.assets/2021-02-17%2016_32_44-education_src_Print.java%20-%20E__project_eclipse.2019.java.AbridgeTraining_workspac.png)

ホバー表示が出てきます。人によっては英語になっているかと思いますが、基本的には日本語で出てきます。

この状態のままF2キーを押しますと、

![2021-02-17 16_36_29-screenshot](Java%20%20%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9.assets/2021-02-17%2016_36_29-screenshot.png)

ホバーウィンドウに遷移し、大きくしたりスクロールが出たりします。

Javaの共通メソッドである「System.out.format」メソッドがどのような動作を行うかが書かれています。

ここに書かれている内容はJavadocで記述されていて、EclipseなどのIDEによって読み込みができるようになっています。

いったんホバー表示を閉じるにはホバー以外をクリックします。

次は「format」の部分にカーソルを移動し、「F3」キーをクリックします。

![2021-02-17 16_49_29-java.io.PrintStream - E__project_eclipse.2019.java.AbridgeTraining_workspace - E](Java%20%20%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9.assets/2021-02-17%2016_49_29-java.io.PrintStream%20-%20E__project_eclipse.2019.java.AbridgeTraining_workspace%20-%20E.png)

エディタに「PrintStream.class」のソースコードが表示され、「format」メソッドの行にフォーカスが移動します。

「format」メソッドの上に実際のJavadocの記述が書かれています。オリジナルのソースコードですので必ず英語で表示されます。

ちなみにソースコードが表示されるのはオープンソースとしてソースコード付きの実行ファイルで配布されているからです。全てのJavaのシステムがソースコード付きで配布されている訳ではなく、見れないものもあるという事も覚えておきましょう。

### 仕組み

前項で閲覧しました「System.out.format」メソッドのJavadocを元にどのような構成かを上から順番に説明します。

「PrintStream.class」のソースコードを開きます。

![2021-02-17 16_49_29-java.io.PrintStream - E__project_eclipse.2019.java.AbridgeTraining_workspace - E](Java%20%20%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9.assets/2021-02-17%2016_49_29-java.io.PrintStream%20-%20E__project_eclipse.2019.java.AbridgeTraining_workspace%20-%20E.png)

「/**」から「＊/」もしくは最初の「@」までの文章が「説明文」です。どんな処理を行うかを簡単に説明します。

「@」が付いたワードは「タグセクション」といいます。とりあえず画像に存在するタグの説明をします。

@param

パラメーター。引数を記述します。formatメソッドには引数がformatとargsと2つありますので、@paramも2つ記述します。

@throws

例外。どんな例外が発生するかを記述します。formatメソッドには例外がjava.util.IllegalFormatExceptionとNullPointerExceptionと2つありますので、@throwsも2つ記述します。

@return

戻り値。どんな戻り値があるかを記述します。@return自体は1つしか記述できませんので、いくつか種類がある場合はまとめて記述します。

@since

バージョン。このメソッドはJavaの共通メソッドですのでJavaのバージョンが書かれていますが、ここには自分（もしくはチーム）で決めたシステムのバージョン番号を記述します。



画像にあるタグの説明は以上です。このうち良く使用するのは「@param」「@return」です。

他にも色々ありますが、この２つを覚えておけば大丈夫です。

それと全体的な仕様としましてJavadocを読み込んでhtmlに出力する機能がJavaには備わっていますので、途中にhtmlタグを入れることができます。htmlタグ使用時は必ず終わりタグを入れるように記述します。また終わりタグもタグセクションを跨がないように記述します。

### 書き方

実際にJavadocを記述していきます。

Eclipseを起動し、エディタ上で以下のコードを記述します。

```java
public class Print {
…（前の続き）
	public static boolean validate(String args) {
		try {
			Integer.parseInt(args);

			return true;
		} catch (Exception e) {
			return false;
		}
	}
}
```

そして「validate」メソッドの箇所にカーソルを置いてからショートカット「Alt + Shift + J」を押します。

```java
/**
 * @param args
 * @return
 */
```
Javadocのテンプレートが出力されました。引数までは自動で出力されます。

このままでは戻り値や説明文が存在しませんので、以下のように付け足します。

```java
/**
 * 数字チェック
 * @param args 判定する文字列
 * @return 数字だとtrue、数字以外はfalse
 */
```
そして「validate」メソッドの箇所にマウスカーソルを移動させます。

![2021-02-18 15_50_39-education_src_Print.java - E__project_eclipse.2019.java.AbridgeTraining_workspac](Java%20%20%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9.assets/2021-02-18%2015_50_39-education_src_Print.java%20-%20E__project_eclipse.2019.java.AbridgeTraining_workspac.png)

ホバー表示が出てきます。日本語で書いていますのでそのまま表示されます。

基本的には1から作成することは少なく、既存のJavadocのレイアウトをコピーして修正することが多いです。

ただコピーしたままですと処理と内容が一致しなくなりますので、リリースする前には必ず見直すように心掛けましょう。



## 総括

コメントなんて処理とは関係ないので好きに書いてしまいがちですが、実際にチームで開発する上でコメントの書き方はそれぞれルールが存在します。

大きく分けて「新規で本番稼働していない開発」と、「本番稼働をした後に機能追加要望が発生している開発」とで以下のようなルールになっていることが多いです。

新規開発の場合、仕様が固まっていない状態で開発を進めることが多く、その度にJavadocも修正すると非常に手間が掛かります。本番開始の直前にまとめて書くことが多いですので、それまではJavadocを一切書かないようにします。もし中途半端に書かれているソースを見つけても無視をするか、自分が修正をしたときは削除した方が良いでしょう。

機能追加の場合、既存のソースコードをコピーして流用することが多いです。プログラムを作成後にJavadocも同じように修正します。

このように案件によってルールが異なりますが、もし特にルールが存在しないような場合は、書けと言われない限りは極力書かないようにしましょう。新規案件の場合と同様、中途半端に書いてしまうと処理とは違う内容になってもそのままになってしまいます。

しかしずっと書かないままですとセンスの良いJavadocの書き方が身につかなくなってしまいます。もし個人で開発をする際はなるべく書くようにして、全世界に公開しても恥ずかしくないように日々心掛けましょう。